$(document).bind("contextmenu",function(){return false});var old=new1=new2=false;$(function(){$("#oldTip").css("display","none");$("#newTip").css("display","none");$("#newTipAgain").css("display","none");$("#o").bind("focus",function(){$("#oldTip").css("display","none")}).bind("blur",function(){if($(this).val().length===0){$("#oldTip").css("display","inline");old=false}else{if($(this).val()===$("#n").val()){$("#newTip").css("display","inline").text("新密码不能等于旧密码");old=false}else{old=true}}if($(this).val()!==$("#n").val()){$("#newTip").css("display","none");new1=true}});$("#n").bind("focus",function(){$("#newTip").css("display","none")}).bind("blur",function(){if(($(this).val().indexOf(" ")!==-1)){$("#newTip").css("display","inline").text("新密码不能包含空格");new1=false}else{if(!$(this).val()){$("#newTip").css("display","inline").text("新密码不能为空");new1=false}else{if($(this).val()===$("#o").val()){$("#newTip").css("display","inline").text("新密码不能等于旧密码");new1=false}else{if($(this).val()!==$("#s").val()){$("#newTipAgain").css("display","inline");new2=false;new1=true}else{new1=true}}}}if($(this).val()!==$("#o").val()){$("#oldTip").css("display","none");old=true}});$("#s").bind("focus",function(){$("#newTipAgain").css("display","none")}).bind("blur",function(){if($(this).val()!==$("#n").val()){$("#newTipAgain").css("display","inline");new2=false}else{new2=true}});$("#btnOk").bind("click",function(){if(old&&new1&&new2){$.ajax({url:"platform/span/safe/change/psw.dit",type:"post",data:{oPsw:$("#o").val(),nPsw:$("#n").val()},dataType:"json",success:function(a){if(a&&a.errno==0){alert("修改成功！");if(parent&&parent.nav){parent.nav.onClickSafe()}}else{if(a&&a.errno==7){alert("旧密码不正确");return false}else{alert(a.msg);return false}}}})}});$("#btnBack").bind("click",function(){if(parent&&parent.nav){parent.nav.onClickSafe()}})});